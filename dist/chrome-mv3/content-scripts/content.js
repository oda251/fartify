var content=function(){"use strict";var Q=Object.defineProperty;var Z=(d,c,u)=>c in d?Q(d,c,{enumerable:!0,configurable:!0,writable:!0,value:u}):d[c]=u;var o=(d,c,u)=>Z(d,typeof c!="symbol"?c+"":c,u);var _,$;function d(e){return e}async function c(e,t,s,n){Array.from(e.querySelectorAll(t)).forEach(i=>{i.removeEventListener(s,n),i.addEventListener(s,n)})}async function u(e,t,s){Array.from(document.querySelectorAll(e)).forEach(a=>{a.removeEventListener(t,s)})}const O={name:"Fartify",version:"1.0.0",permissions:["storage","activeTab","background"],web_accessible_resources:[{resources:["sounds/*"],matches:["<all_urls>"]}]}.name;class l{constructor(t){o(this,"namespace");o(this,"GET");o(this,"SET");this.namespace=`${O}:${t}`,this.GET=this.format("GET"),this.SET=this.format("SET")}format(t){return`${this.namespace}:${t}`}toString(){return this.namespace}}class r{}o(r,"config",new l("config")),o(r,"isActivated",new l("is-activated")),o(r,"sound",new l("sound")),o(r,"soundList",new l("sound-list")),o(r,"probability",new l("probability")),o(r,"fartMode",new l("fart-mode")),o(r,"update",new l("update"));class f{constructor(t){o(this,"type_");o(this,"get",async()=>new Promise((t,s)=>{chrome.runtime.sendMessage({type:this.type_.GET},n=>{chrome.runtime.lastError?s(chrome.runtime.lastError):t(n)})}));o(this,"set",async t=>await chrome.runtime.sendMessage({type:this.type_.SET,value:t}));this.type_=t}}const T={config:new f(r.config),isActivated:new f(r.isActivated),sound:new f(r.sound),probability:new f(r.probability),fartMode:new f(r.fartMode),soundList:new f(r.soundList)},F=e=>new Promise(t=>setTimeout(t,e)),I={files:["sounds/fart/06 ブビィッ！.mp3","sounds/fart/57 プゥゥァァ！.mp3","sounds/fart/41 ヴゥィッ！.mp3","sounds/fart/33 ブリリィ、プロォォ.mp3","sounds/fart/27 ポ、ポ、プィィィ！.mp3","sounds/fart/20 ブゥゥ→ビィィィ↑ブゥゥ↓.mp3","sounds/fart/29 ブゥーー！.mp3","sounds/fart/46 ビィィヴゥォォオオオヴァアア！.mp3","sounds/fart/37 プィッ！・・ポピィィ！↑.mp3","sounds/fart/02 ブゥゥゥ！（低音系）.mp3","sounds/fart/10 プリッ！（小さめ）.mp3","sounds/fart/25 ビリリリィ・・ビリィ・・・ブビッ！.mp3","sounds/fart/28 ヴゥボオ、スィィ〜.mp3","sounds/fart/50 ブゥ！.mp3","sounds/fart/43 ブリッ！.mp3","sounds/fart/49 ヴィッ！.mp3","sounds/fart/19 ブリリリィ.mp3","sounds/fart/12 ポスッ！.mp3","sounds/fart/38 ポォウィィィ！！！・・プィィ！.mp3","sounds/fart/42 ブゥー！.mp3","sounds/fart/17 プップッ・・・プリリィ.mp3","sounds/fart/05 ブビッ・・ブビッ・・・ビィー・・・ブリ！.mp3","sounds/fart/15 ブヴィィィ・・・ビィッ！.mp3","sounds/fart/48 ピィァァァ！.mp3","sounds/fart/53 ブゥ…ヴィ！.mp3","sounds/fart/11 ピッ！・・・プーウィィー！.mp3","sounds/fart/44 ブリッ、ピリッ、プリッ！.mp3","sounds/fart/26 ブリリィィリ！.mp3","sounds/fart/45 ブリリィ！ヴルォォ！.mp3","sounds/fart/09 ブゥォッ！.mp3","sounds/fart/52 ブゥヴィ…ヴィリィィ！.mp3","sounds/fart/24 ブリ！・・・ヴィィ.mp3","sounds/fart/23 ビリィ・・ブリィィィィ・・・・・・ブリ.mp3","sounds/fart/31 ブビィィ・・ブロォロォオ！.mp3","sounds/fart/55 プィポッ！.mp3","sounds/fart/54 ヴゥィッチ！.mp3","sounds/fart/56 ヴイッ！.mp3","sounds/fart/03 ブィィィボォォ・・・・・ブゥー！.mp3","sounds/fart/14 ブゥゥゥプリッ！.mp3","sounds/fart/16 ポピッ・・・プリッ・・・ピッ！.mp3","sounds/fart/47 ヴィヴォヴァ！.mp3","sounds/fart/04 ヴィッ・・・ブリリィ・・・ブリィ（若干水気あり）.mp3","sounds/fart/13 プルリィィィィ.mp3","sounds/fart/21 ブィィィィ（ミチミチ）.mp3","sounds/fart/30 プィィー！（すかし気味）.mp3","sounds/fart/32 プッ！クロォロロ・・クリィ・・プリ.mp3","sounds/fart/22 プゥゥゥ！.mp3","sounds/fart/08 ビィボゥオ・・・ビィ！.mp3","sounds/fart/34 ボォォブィィ！・・・ブルルルゥ・・・・ブリィ.mp3","sounds/fart/07 ヴィッー！.mp3","sounds/fart/58 プシッピーピ！.mp3","sounds/fart/18 ブィィィ！.mp3","sounds/fart/36 プゥスゥォォォオ！（すかし）.mp3","sounds/fart/39 ブゥィ！・・・ブィッ！.mp3","sounds/fart/01 ブリッ！.mp3","sounds/fart/35 ブビィィ！.mp3","sounds/fart/40 ブゥィィ！.mp3","sounds/fart/51 ビー！.mp3"]},C={isActivated:{default:!0,fallback:!1},fartMode:{default:"natural",fallback:"natural"},sound:{default:"",fallback:"sounds/fart/01 ブリッ！.mp3"},allSounds:{default:I.files,fallback:I.files},probability:{default:.1,fallback:.1},stainColor:{default:"#ffdead",fallback:"#ffdead"}};let p=0;const R=.4,P=e=>{const t=e/90-.1;return t<0?0:t>R?R:t},U=()=>{const e=Array.from(document.querySelectorAll(".fart-stain"));if(e.length===0){p=0;const t=document.createElement("div");t.classList.add("fart-stain"),t.style.backgroundColor=C.stainColor.default,document.body.appendChild(t)}else p++,e.forEach(t=>{t.style.opacity=P(p).toString()})},Y=()=>{Array.from(document.querySelectorAll(".fart-stain")).forEach(t=>{t.remove()}),p=0},h={NATURAL:"sometimes",FREQUENT:"frequently",ALLWAYS:"allways",BAZOOKA:"bazooka"},x=e=>{const t=Math.random()*2+2,s=document.createElement("div");s.classList.add("fart-container"),s.style.fontSize=`${t}rem`,s.style.top=`${e.y}px`,s.style.left=`${e.x}px`;const n=q();s.append(...n),s.addEventListener("animationend",()=>s.remove()),document.body.appendChild(s)},q=()=>Array.from({length:Math.ceil(Math.random()*5+5)},()=>{const t=document.createElement("div");return t.classList.add("fart-effect"),t.style.top=`${Math.random()*5-2.5}rem`,t.style.left=`${Math.random()*8-3}rem`,t.style.boxShadow=`0 0 ${Math.random()*4+3}rem 0.5rem var(--fart-color)`,t}),D=e=>{const t=document.body.getBoundingClientRect(),s=window.pageXOffset||document.documentElement.scrollLeft,n=window.pageYOffset||document.documentElement.scrollTop;return console.log(`scrollLeft: ${s}, scrollTop: ${n}`),console.log(`rect.left: ${t.left}, rect.top: ${t.top}`),console.log(`event.clientX: ${e.clientX}, event.clientY: ${e.clientY}`),console.log(`event.clientX + scrollLeft - rect.left: ${e.clientX+s-t.left}, event.clientY + scrollTop - rect.top: ${e.clientY+n-t.top}`),{x:e.clientX-t.left,y:e.clientY-t.top}},G=async(e,t)=>{const s=await T.config.get();if(!s.isActivated)return;if(t===void 0)switch(s.mode){case h.NATURAL:t=.1;break;case h.FREQUENT:t=.5;break;case h.ALLWAYS:t=1;break;case h.BAZOOKA:t=10.9;break;default:t=.1;break}const n=Math.ceil(t);t!==n&&(t=t-Math.floor(t));const a=D(e);for(let i=0;i<n;i++){if(Math.random()>t)return;U();const y=chrome.runtime.getURL(await T.sound.get());new Audio(y).play(),x(a),await F(Math.random()*60+40)}},E='button, [href], input[type="submit"], input[type="button"], input[type="reset"]',v=async e=>{e instanceof MouseEvent&&G(e)};class V{constructor(){o(this,"observer");this.observer=new MutationObserver(t=>{t.forEach(s=>{s.type==="childList"&&s.addedNodes.forEach(n=>{n.nodeType===Node.ELEMENT_NODE&&c(n,E,"click",v)})})})}observe(){this.observer.observe(document.body,{childList:!0,subtree:!0})}disconnect(){this.observer.disconnect()}}let w;const W={matches:["<all_urls>"],async main(e){w=new V,chrome.runtime.onMessage.addListener((s,n,a)=>{s.type===r.update.SET&&(s.value?(c(document,E,"click",v),w.observe()):(u(E,"click",v),Y(),w.disconnect()))}),await T.isActivated.get()&&(c(document,E,"click",v),w.observe())}},g=(($=(_=globalThis.browser)==null?void 0:_.runtime)==null?void 0:$.id)==null?globalThis.chrome:globalThis.browser;function b(e,...t){}const X={debug:(...e)=>b(console.debug,...e),log:(...e)=>b(console.log,...e),warn:(...e)=>b(console.warn,...e),error:(...e)=>b(console.error,...e)},B={BASE_URL:"/",BROWSER:"chrome",CHROME:!0,COMMAND:"build",DEV:!1,EDGE:!1,ENTRYPOINT:"content",FIREFOX:!1,MANIFEST_VERSION:3,MODE:"production",OPERA:!1,PROD:!0,SAFARI:!1,SSR:!1,VITE_CJS_IGNORE_WARNING:"true"},A=class A extends Event{constructor(t,s){super(A.EVENT_NAME,{}),this.newUrl=t,this.oldUrl=s}};o(A,"EVENT_NAME",N("wxt:locationchange"));let L=A;function N(e){var s;const t=typeof B>"u"?"build":"content";return`${(s=g==null?void 0:g.runtime)==null?void 0:s.id}:${t}:${e}`}function z(e){let t,s;return{run(){t==null&&(s=new URL(location.href),t=e.setInterval(()=>{let n=new URL(location.href);n.href!==s.href&&(window.dispatchEvent(new L(n,s)),s=n)},1e3))}}}const m=class m{constructor(t,s){o(this,"isTopFrame",window.self===window.top);o(this,"abortController");o(this,"locationWatcher",z(this));this.contentScriptName=t,this.options=s,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}get signal(){return this.abortController.signal}abort(t){return this.abortController.abort(t)}get isInvalid(){return g.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(t){return this.signal.addEventListener("abort",t),()=>this.signal.removeEventListener("abort",t)}block(){return new Promise(()=>{})}setInterval(t,s){const n=setInterval(()=>{this.isValid&&t()},s);return this.onInvalidated(()=>clearInterval(n)),n}setTimeout(t,s){const n=setTimeout(()=>{this.isValid&&t()},s);return this.onInvalidated(()=>clearTimeout(n)),n}requestAnimationFrame(t){const s=requestAnimationFrame((...n)=>{this.isValid&&t(...n)});return this.onInvalidated(()=>cancelAnimationFrame(s)),s}requestIdleCallback(t,s){const n=requestIdleCallback((...a)=>{this.signal.aborted||t(...a)},s);return this.onInvalidated(()=>cancelIdleCallback(n)),n}addEventListener(t,s,n,a){var i;s==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),(i=t.addEventListener)==null||i.call(t,s.startsWith("wxt:")?N(s):s,n,{...a,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),X.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:m.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName},"*")}listenForNewerScripts(t){let s=!0;const n=a=>{var i,y;if(((i=a.data)==null?void 0:i.type)===m.SCRIPT_STARTED_MESSAGE_TYPE&&((y=a.data)==null?void 0:y.contentScriptName)===this.contentScriptName){const k=s;if(s=!1,k&&(t!=null&&t.ignoreFirstEvent))return;this.notifyInvalidated()}};addEventListener("message",n),this.onInvalidated(()=>removeEventListener("message",n))}};o(m,"SCRIPT_STARTED_MESSAGE_TYPE",N("wxt:content-script-started"));let M=m;function j(){}function S(e,...t){}const K={debug:(...e)=>S(console.debug,...e),log:(...e)=>S(console.log,...e),warn:(...e)=>S(console.warn,...e),error:(...e)=>S(console.error,...e)};return(async()=>{try{const{main:e,...t}=W,s=new M("content",t);return await e(s)}catch(e){throw K.error('The content script "content" crashed on startup!',e),e}})()}();
content;
